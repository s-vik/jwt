(this.webpackJsonpjwt_authorization=this.webpackJsonpjwt_authorization||[]).push([[0],{107:function(e,t,r){e.exports={preloader:"preloader_preloader__IPIBs"}},115:function(e,t,r){},116:function(e,t,r){},236:function(e,t,r){"use strict";r.r(t);var n,a=r(2),c=r(0),o=r(47),s=r.n(o),i=(r(115),r(116),r(28)),u=r(8),l=r(72),b=r(21),j=r(10),d=r.n(j),h=r(22),p=r(12),f=r(104).create({headers:{Accept:"application/json","Content-Type":"application/json"},baseURL:"http://142.93.134.108:1111/"}),m=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.post("sign_up",{email:e,password:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},O=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.post("login?email=".concat(e,"&password=").concat(t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},g=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},x=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("refresh",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("refresh_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},v="auth/SET_AUTH_USER_ERROR",_="auth/SET_REG_USER_ERROR",k="auth/SET_IS_AUTH",w="auth/SET_IS_FETCHING",S={isAuth:!1,error:null,regError:null,isFetching:!1},E=function(e){return{type:k,isAuth:e}},A=function(e){return{type:w,isFetching:e}},C=function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(A(!0)),r.next=3,O(e,t);case 3:200===(a=r.sent).data.statusCode?(n(E(!0)),localStorage.setItem("access_token",a.data.body.access_token),localStorage.setItem("refresh_token",a.data.body.refresh_token),n(A(!1))):(n({type:v,error:"Wrong pass or email"}),n(A(!1)));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},y=function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A(!0)),e.next=3,g();case 3:"ok"===(r=e.sent).data.body.status?(t(E(!0)),t(A(!1))):"error"===r.data.body.status&&localStorage.getItem("refresh_token")?(t(E(!1)),t(function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:200===(r=e.sent).data.statusCode&&(localStorage.setItem("access_token",r.data.body.access_token),localStorage.setItem("refresh_token",r.data.body.refresh_token),t(y()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):localStorage.getItem("refresh_token")||(t(E(!1)),t(A(!1)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(p.a)(Object(p.a)({},e),{},{error:t.error});case _:return Object(p.a)(Object(p.a)({},e),{},{regError:t.regError});case k:return Object(p.a)(Object(p.a)({},e),{},{isAuth:t.isAuth});case w:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});default:return e}},F=r(9),I=r.n(F),R=r(105),T=r.n(R),z=r(238),M=r(237),P=function(e){if(!e)return"this field is required"},U=r(109),L=function(e){return function(t){var r=t.input,n=t.meta,c=Object(U.a)(t,["input","meta"]);return Object(a.jsxs)("div",{className:I.a.forControl,children:[Object(a.jsx)(e,Object(p.a)(Object(p.a)(Object(p.a)({meta:n},c),r),{},{className:n.error&&n.active?I.a.error+" "+I.a.form_field:I.a.form_field})),n.error&&n.active&&Object(a.jsx)("div",{className:I.a.errorMessage,children:n.error})]})}},B=L("input"),H=Object(M.a)({form:"login"})((function(e){var t=e.handleSubmit,r=e.errorMessage;e.anyTouched;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{validate:[P],component:B,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{validate:[P],component:B,placeholder:"Password",name:"password",type:"password"})}),r&&Object(a.jsx)("div",{className:r&&I.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:I.a.submit_button,children:"Login"})})]})})),J=L("input"),G=Object(M.a)({form:"registration"})((function(e){var t=e.handleSubmit,r=e.errorMessage;e.anyTouched;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{validate:[P],component:J,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(z.a,{validate:[P],component:J,placeholder:"Password",name:"password",type:"password"})}),r&&Object(a.jsx)("div",{className:r&&I.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:I.a.submit_button,children:"Register"})})]})})),W=function(e){var t=e.error,r=e.regError,n=e.className,c=e.handleClick,o=e.active,s=e.reg,i=e.onSubmit;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:I.a.loginForm,onClick:c,children:[Object(a.jsx)("label",{className:"Authorization"===o?n:I.a.tab,title:"Authorization",children:"Authorization"}),Object(a.jsx)("label",{className:"Registration"===o?n:I.a.tab,title:"Registration",children:"Registration"})]}),s?Object(a.jsx)("div",{children:Object(a.jsx)(G,{errorMessage:r,onSubmit:i})}):Object(a.jsx)("div",{children:Object(a.jsx)(H,{errorMessage:t,onSubmit:i})})]})},q=r(107),D=r.n(q),Q=r.p+"static/media/preloader.9bb0fb74.svg",V=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:D.a.preloader,src:Q,alt:"preloader"})})},Z=T.a.bind(I.a),K=Object(b.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,error:t.error,regError:t.regError,isFetching:t.isFetching}}),{login:C,signUp:function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(e,t);case 2:"Ok"===r.sent.data.status?(n(C(e,t)),n(A(!1))):n({type:_,regError:"account is already exist"});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},me:y})((function(e){var t=e.isAuth,r=e.error,n=e.login,o=e.signUp,s=e.me,i=e.regError,b=e.isFetching,j=Object(c.useState)("Authorization"),d=Object(l.a)(j,2),h=d[0],p=d[1],f=Object(c.useState)(!1),m=Object(l.a)(f,2),O=m[0],g=m[1],x=Object(u.g)();Object(c.useEffect)((function(){t?x.push("/private"):localStorage.getItem("access_token")&&s()}),[t,x,s]);var v=Z("tab",{active:!0});return Object(a.jsx)(a.Fragment,{children:b?Object(a.jsx)(V,{}):Object(a.jsx)(W,{error:r,regError:i,className:v,handleClick:function(e){p(e.target.title),"Registration"===e.target.title?g(!0):g(!1)},active:h,reg:O,onSubmit:function(e){var t=e.login,r=e.password;"Registration"===h?o(t,r):"Authorization"===h&&n(t,r)}})})})),X=function(e){return{isAuth:e.auth.isAuth}},Y=(n=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Private"})})},Object(b.b)(X)((function(e){return e.isAuth?Object(a.jsx)(n,Object(p.a)({},e)):Object(a.jsx)(u.a,{to:"/public"})}))),$=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsxs)("nav",{children:[Object(a.jsx)(i.b,{activeClassName:"active",className:"App-link",to:"public",children:"Public"}),Object(a.jsx)(i.b,{activeClassName:"active",className:"App-link",to:"private",children:"Private"})]}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/public",component:K}),Object(a.jsx)(u.b,{path:"/private",component:Y}),Object(a.jsx)(u.a,{to:"/public"})]})]})})},ee=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,240)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},te=r(7),re=r(239),ne=r(108),ae=Object(te.c)({auth:N,form:re.a}),ce=Object(te.e)(ae,Object(te.d)(Object(te.a)(ne.a)));s.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(b.a,{store:ce,children:Object(a.jsx)($,{})})}),document.getElementById("root")),ee()},9:function(e,t,r){e.exports={error:"formControls_error__26JxM",forControl:"formControls_forControl__2Wfu7",errorMessage:"formControls_errorMessage__1E7_V",loginError:"formControls_loginError__1SQOe",loginForm:"formControls_loginForm__3m6H-",tab:"formControls_tab__Anfau",active:"formControls_active__1ChjZ",submit_button:"formControls_submit_button__1WGiD",form_field:"formControls_form_field__2qJud"}}},[[236,1,2]]]);
//# sourceMappingURL=main.006ee2d1.chunk.js.map
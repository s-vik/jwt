(this.webpackJsonptask_jwt=this.webpackJsonptask_jwt||[]).push([[0],{108:function(e,t,r){e.exports={preloader:"preloader_preloader__3mRUd"}},115:function(e,t,r){},116:function(e,t,r){},14:function(e,t,r){e.exports={error:"formControls_error__1IIRU",forControl:"formControls_forControl__3wMFa",errorMessage:"formControls_errorMessage__1KgVV",loginError:"formControls_loginError__1BsdZ",loginForm:"formControls_loginForm__2IweL",tab:"formControls_tab__-S0lu",active:"formControls_active__3AkFh"}},236:function(e,t,r){"use strict";r.r(t);var n,a=r(2),c=r(0),o=r(48),s=r.n(o),i=(r(115),r(116),r(28)),u=r(8),l=r(73),j=r(21),b=r(9),d=r.n(b),h=r(22),p=r(11),O=r(105).create({headers:{Accept:"application/json","Content-Type":"application/json"},baseURL:"https://142.93.134.108:1111/"}),f=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.post("sign_up",{email:e,password:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},g=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.post("login?email=".concat(e,"&password=").concat(t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},m=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},x=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("refresh",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("refresh_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},v="auth/SET_AUTH_USER_ERROR",_="auth/SET_REG_USER_ERROR",w="auth/SET_IS_AUTH",S="auth/SET_IS_FETCHING",E={isAuth:!1,error:null,regError:null,isFetching:!1},k=function(e){return{type:w,isAuth:e}},y=function(e){return{type:S,isFetching:e}},A=function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(e,t);case 2:200===(a=r.sent).data.statusCode?(n(y(!0)),n(k(!0)),localStorage.setItem("access_token",a.data.body.access_token),localStorage.setItem("refresh_token",a.data.body.refresh_token),n(y(!1))):n({type:v,error:"Wrong pass or email"});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},R=function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y(!0)),e.next=3,m();case 3:"ok"===(r=e.sent).data.body.status?(t(k(!0)),t(y(!1))):"error"===r.data.body.status&&localStorage.getItem("refresh_token")&&t(function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:200===(r=e.sent).data.statusCode&&localStorage.setItem("access_token",r.data.body.access_token),localStorage.setItem("refresh_token",r.data.body.refresh_token),t(R());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(p.a)(Object(p.a)({},e),{},{error:t.error});case _:return Object(p.a)(Object(p.a)({},e),{},{regError:t.regError});case w:return Object(p.a)(Object(p.a)({},e),{},{isAuth:t.isAuth});case S:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});default:return e}},F=r(14),I=r.n(F),T=r(106),N=r.n(T),U=r(33),L=r(238),M=r(237),z=function(e){if(!e)return"this field is required"},P=function(e){return function(t){var r=t.input,n=t.meta,c=Object(U.a)(t,["input","meta"]);return Object(a.jsxs)("div",{className:I.a.forControl,children:[Object(a.jsx)(e,Object(p.a)(Object(p.a)(Object(p.a)({meta:n},c),r),{},{className:n.error&&n.active?I.a.error:""})),n.error&&n.active&&Object(a.jsx)("div",{className:I.a.errorMessage,children:n.error})]})}},B=P("input"),D=Object(M.a)({form:"login"})((function(e){var t=e.handleSubmit,r=e.errorMessage,n=e.anyTouched;Object(U.a)(e,["handleSubmit","errorMessage","anyTouched"]);return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[z],component:B,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[z],component:B,placeholder:"Password",name:"password",type:"password"})}),r&&n&&Object(a.jsx)("div",{className:r&&I.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"Login"})})]})})),V=P("input"),X=Object(M.a)({form:"registration"})((function(e){var t=e.handleSubmit,r=e.errorMessage,n=e.anyTouched;Object(U.a)(e,["handleSubmit","errorMessage","anyTouched"]);return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[z],component:V,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[z],component:V,placeholder:"Password",name:"password",type:"password"})}),r&&n&&Object(a.jsx)("div",{className:r&&I.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"Register"})})]})})),H=function(e){var t=e.error,r=e.regError,n=e.className,c=e.handleClick,o=e.active,s=e.reg,i=e.onSubmit;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{onClick:c,children:[Object(a.jsx)("label",{className:"Authorization"===o?n:I.a.tab,title:"Authorization",children:"Authorization"}),Object(a.jsx)("label",{className:"Registration"===o?n:I.a.tab,title:"Registration",children:"Registration"})]}),s?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Registration"}),Object(a.jsx)(X,{errorMessage:r,onSubmit:i})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsx)(D,{errorMessage:t,onSubmit:i})]})]})},G=r(108),J=r.n(G),q=r.p+"static/media/preloader.38647682.svg",K=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:J.a.preloader,src:q,alt:"preloader"})})},W=N.a.bind(I.a),Z=Object(j.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,error:t.error,regError:t.regError,isFetching:t.isFetching}}),{login:A,signUp:function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(e,t);case 2:"Ok"===r.sent.data.status?(n(A(e,t)),n(y(!1))):n({type:_,regError:"account is already exist"});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},me:R})((function(e){var t=e.isAuth,r=e.error,n=e.login,o=e.signUp,s=e.me,i=e.regError,j=e.isFetching,b=Object(c.useState)("Authorization"),d=Object(l.a)(b,2),h=d[0],p=d[1],O=Object(c.useState)(!1),f=Object(l.a)(O,2),g=f[0],m=f[1],x=Object(u.g)();Object(c.useEffect)((function(){t?x.push("/private"):localStorage.getItem("access_token")&&s()}),[t,x,s]);var v=W("tab",{active:!0});return Object(a.jsx)(a.Fragment,{children:j?Object(a.jsx)(K,{}):Object(a.jsx)(H,{error:r,regError:i,className:v,handleClick:function(e){p(e.target.title),"Registration"===e.target.title?m(!0):m(!1)},active:h,reg:g,onSubmit:function(e){var t=e.login,r=e.password;"Registration"===h?o(t,r):"Authorization"===h&&n(t,r)}})})})),Q=function(e){return{isAuth:e.auth.isAuth}},Y=(n=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Private"})})},Object(j.b)(Q)((function(e){return e.isAuth?Object(a.jsx)(n,Object(p.a)({},e)):Object(a.jsx)(u.a,{to:"/public"})}))),$=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsxs)("nav",{children:[Object(a.jsx)(i.b,{to:"public",children:"Public"}),Object(a.jsx)(i.b,{to:"private",children:"Private"})]}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/public",component:Z}),Object(a.jsx)(u.b,{path:"/private",component:Y}),Object(a.jsx)(u.a,{to:"/public"})]})]})})},ee=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,240)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},te=r(7),re=r(239),ne=r(109),ae=Object(te.c)({auth:C,form:re.a}),ce=Object(te.e)(ae,Object(te.d)(Object(te.a)(ne.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));s.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(j.a,{store:ce,children:Object(a.jsx)($,{})})}),document.getElementById("root")),ee()}},[[236,1,2]]]);
//# sourceMappingURL=main.0c9df279.chunk.js.map
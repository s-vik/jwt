(this.webpackJsonptask_jwt=this.webpackJsonptask_jwt||[]).push([[0],{108:function(e,t,r){e.exports={preloader:"preloader_preloader__3mRUd"}},115:function(e,t,r){},116:function(e,t,r){},14:function(e,t,r){e.exports={error:"formControls_error__1IIRU",forControl:"formControls_forControl__3wMFa",errorMessage:"formControls_errorMessage__1KgVV",loginError:"formControls_loginError__1BsdZ",loginForm:"formControls_loginForm__2IweL",tab:"formControls_tab__-S0lu",active:"formControls_active__3AkFh"}},236:function(e,t,r){"use strict";r.r(t);var n,a=r(2),c=r(0),o=r(48),s=r.n(o),i=(r(115),r(116),r(28)),u=r(8),l=r(73),j=r(21),b=r(9),d=r.n(b),h=r(22),p=r(11),f=r(105),O=r.n(f).a.create({baseURL:"//142.93.134.108:1111/"}),g=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.post("sign_up",{email:e,password:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},m=function(e,t){return Object(h.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.post("login?email=".concat(e,"&password=").concat(t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},x=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},v=function(){return Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("refresh",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("refresh_token"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},_="auth/SET_AUTH_USER_ERROR",w="auth/SET_REG_USER_ERROR",k="auth/SET_IS_AUTH",S="auth/SET_IS_FETCHING",E={isAuth:!1,error:null,regError:null,isFetching:!1},y=function(e){return{type:k,isAuth:e}},A=function(e){return{type:S,isFetching:e}},C=function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(e,t);case 2:200===(a=r.sent).data.statusCode?(n(A(!0)),n(y(!0)),localStorage.setItem("access_token",a.data.body.access_token),localStorage.setItem("refresh_token",a.data.body.refresh_token),n(A(!1))):n({type:_,error:"Wrong pass or email"});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},R=function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A(!0)),e.next=3,x();case 3:"ok"===(r=e.sent).data.body.status?(t(y(!0)),t(A(!1))):"error"===r.data.body.status&&localStorage.getItem("refresh_token")&&t(function(){var e=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:200===(r=e.sent).data.statusCode&&localStorage.setItem("access_token",r.data.body.access_token),localStorage.setItem("refresh_token",r.data.body.refresh_token),t(R());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(p.a)(Object(p.a)({},e),{},{error:t.error});case w:return Object(p.a)(Object(p.a)({},e),{},{regError:t.regError});case k:return Object(p.a)(Object(p.a)({},e),{},{isAuth:t.isAuth});case S:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});default:return e}},I=r(14),N=r.n(I),T=r(106),M=r.n(T),U=r(33),L=r(238),z=r(237),P=function(e){if(!e)return"this field is required"},B=function(e){return function(t){var r=t.input,n=t.meta,c=Object(U.a)(t,["input","meta"]);return Object(a.jsxs)("div",{className:N.a.forControl,children:[Object(a.jsx)(e,Object(p.a)(Object(p.a)(Object(p.a)({meta:n},c),r),{},{className:n.error&&n.active?N.a.error:""})),n.error&&n.active&&Object(a.jsx)("div",{className:N.a.errorMessage,children:n.error})]})}},H=B("input"),G=Object(z.a)({form:"login"})((function(e){var t=e.handleSubmit,r=e.errorMessage,n=e.anyTouched;Object(U.a)(e,["handleSubmit","errorMessage","anyTouched"]);return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[P],component:H,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[P],component:H,placeholder:"Password",name:"password",type:"password"})}),r&&n&&Object(a.jsx)("div",{className:r&&N.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"Login"})})]})})),J=B("input"),V=Object(z.a)({form:"registration"})((function(e){var t=e.handleSubmit,r=e.errorMessage,n=e.anyTouched;Object(U.a)(e,["handleSubmit","errorMessage","anyTouched"]);return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[P],component:J,placeholder:"Login",name:"login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{validate:[P],component:J,placeholder:"Password",name:"password",type:"password"})}),r&&n&&Object(a.jsx)("div",{className:r&&N.a.loginError,children:r}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"Register"})})]})})),q=function(e){var t=e.error,r=e.regError,n=e.className,c=e.handleClick,o=e.active,s=e.reg,i=e.onSubmit;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{onClick:c,children:[Object(a.jsx)("label",{className:"Authorization"===o?n:N.a.tab,title:"Authorization",children:"Authorization"}),Object(a.jsx)("label",{className:"Registration"===o?n:N.a.tab,title:"Registration",children:"Registration"})]}),s?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Registration"}),Object(a.jsx)(V,{errorMessage:r,onSubmit:i})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsx)(G,{errorMessage:t,onSubmit:i})]})]})},D=r(108),K=r.n(D),W=r.p+"static/media/preloader.38647682.svg",Z=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:K.a.preloader,src:W,alt:"preloader"})})},Q=M.a.bind(N.a),X=Object(j.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,error:t.error,regError:t.regError,isFetching:t.isFetching}}),{login:C,signUp:function(e,t){return function(){var r=Object(h.a)(d.a.mark((function r(n){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(e,t);case 2:"Ok"===r.sent.data.status?(n(C(e,t)),n(A(!1))):n({type:w,regError:"account is already exist"});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},me:R})((function(e){var t=e.isAuth,r=e.error,n=e.login,o=e.signUp,s=e.me,i=e.regError,j=e.isFetching,b=Object(c.useState)("Authorization"),d=Object(l.a)(b,2),h=d[0],p=d[1],f=Object(c.useState)(!1),O=Object(l.a)(f,2),g=O[0],m=O[1],x=Object(u.g)();Object(c.useEffect)((function(){t?x.push("/private"):localStorage.getItem("access_token")&&s()}),[t,x,s]);var v=Q("tab",{active:!0});return Object(a.jsx)(a.Fragment,{children:j?Object(a.jsx)(Z,{}):Object(a.jsx)(q,{error:r,regError:i,className:v,handleClick:function(e){p(e.target.title),"Registration"===e.target.title?m(!0):m(!1)},active:h,reg:g,onSubmit:function(e){var t=e.login,r=e.password;"Registration"===h?o(t,r):"Authorization"===h&&n(t,r)}})})})),Y=function(e){return{isAuth:e.auth.isAuth}},$=(n=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Private"})})},Object(j.b)(Y)((function(e){return e.isAuth?Object(a.jsx)(n,Object(p.a)({},e)):Object(a.jsx)(u.a,{to:"/public"})}))),ee=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsxs)("nav",{children:[Object(a.jsx)(i.b,{to:"public",children:"Public"}),Object(a.jsx)(i.b,{to:"private",children:"Private"})]}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/public",component:X}),Object(a.jsx)(u.b,{path:"/private",component:$}),Object(a.jsx)(u.a,{to:"/public"})]})]})})},te=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,240)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},re=r(7),ne=r(239),ae=r(109),ce=Object(re.c)({auth:F,form:ne.a}),oe=Object(re.e)(ce,Object(re.d)(Object(re.a)(ae.a)));s.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(j.a,{store:oe,children:Object(a.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[236,1,2]]]);
//# sourceMappingURL=main.f427f2c1.chunk.js.map